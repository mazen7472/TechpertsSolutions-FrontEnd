<div class="create-product-container">
  <h2 class="section-title">Create New Product</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <!-- Basic Fields -->
    @for (field of ['name','price','stock','discountPrice','imageUrl','subCategoryName','techCompanyId']; track $index) {
        <div class="form-group">
      <label [for]="field">{{ field | titlecase }}</label>
      <input [formControlName]="field" [type]="field.includes('price') || field === 'stock' ? 'number' : 'text'" />
    </div>
    }

    <div class="form-group">
      <label>Description</label>
      <textarea formControlName="description"></textarea>
    </div>

    <!-- Dropdowns -->
    <div class="form-group">
      <label>Category</label>
      <select formControlName="category">
        <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
      </select>
    </div>

    <div class="form-group">
      <label>Status</label>
      <select formControlName="statusSelect">
        <option [value]="status.Pending">Pending</option>
        <option [value]="status.Approved">Approved</option>
        <option [value]="status.Rejected">Rejected</option>
      </select>
    </div>

    <div formArrayName="specifications">
    <h3>Specifications</h3>
    <button type="button" (click)="addSpecification()">Add Specification</button>

    <div *ngFor="let spec of specifications.controls; let i = index" [formGroupName]="i">
      <input formControlName="key" placeholder="Specification Key">
      <input formControlName="value" placeholder="Specification Value">
      <button type="button" (click)="removeSpecification(i)">Remove</button>
    </div>
  </div>

  <div formArrayName="warranties">
    <h3>Warranties</h3>
    <button type="button" (click)="addWarranty()">Add Warranty</button>

    <div *ngFor="let warranty of warranties.controls; let i = index" [formGroupName]="i">
      <input formControlName="durationInMonths" placeholder="Duration (months)" type="number">
      <input formControlName="description" placeholder="Warranty Description">
      <button type="button" (click)="removeWarranty(i)">Remove</button>
    </div>
  </div>

    <button class="submit-btn" type="submit" [disabled]="submitting || form.invalid">Create Product</button>
  </form>
</div>
