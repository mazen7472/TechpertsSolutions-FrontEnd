<div class="col">
  <div
    class="card h-100 shadow-sm border-0 rounded-4 overflow-hidden position-relative"
  >
    <!-- Wishlist Button -->
    <button
      type="button"
      class="btn btn-light rounded-circle shadow position-absolute top-0 start-0 m-2 wishlist-btn"
      (click)="onAddToWishlist(productC)"
    >
      <i class="bi bi-heart"></i>
    </button>

    <!-- Product Image -->
    <img
      [src]="productC.imageUrl || 'https://picsum.photos/seed/' + productC.id + '/300/200'"
      class="card-img-top object-fit-cover"
      [alt]="productC.name"
      (error)="onImgError($event)"
    />

    <div class="card-body d-flex flex-column">
      <!-- Title -->
      <h5 class="card-title fw-semibold text-truncate">{{ productC.name }}</h5>

      <!-- Description -->
      <p class="card-text small mb-2 text-truncate">
        {{ productC.description }}
      </p>

      <!-- Optional Title -->
      @if (productC.title) {
        <p class="mb-2">
          <small>{{ productC.title }}</small>
        </p>
      }

      <!-- Price + View Link -->
      <div class="d-flex justify-content-between align-items-center mb-3">
        <span class="fw-bold text-primary fs-5">${{ productC.price }}</span>

        @if (productC.link) {
          <a
            [href]="productC.link"
            target="_blank"
            class="btn btn-sm btn-outline-primary"
          >
            View
          </a>
        }
      </div>

      <!-- Add to Cart Button -->
      <button
        class="btn btn-sm btn-success w-100 mt-auto"
        (click)="onAddToCart()"
      >
        <i class="bi bi-cart-plus me-2"></i> Add to Cart
      </button>
      <!-- View Details Button -->
      <a
        (click)="goToProduct(productC.id)"
        class="btn btn-sm btn-outline-primary w-100 mt-2"
      >
        <i class="bi bi-eye me-2"></i> View Details
      </a>
      <!-- Category -->
      <p class="mt-3 mb-0 text-primary text-end small">
        Category: {{ productC.category || "Uncategorized" }}
      </p>
    </div>
  </div>
</div>
